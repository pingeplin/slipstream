### Integration Test Plan: Google Drive Folder Processing

#### 1. Overview
This plan outlines the integration tests for the `slipstream process --folder <FOLDER_ID_OR_URL>` command. These tests will verify the end-to-end functionality of the slipstream tool when interacting with live Google Drive folders.

#### 2. Test Environment & Data
- **Command Under Test**: `slipstream process --folder <FOLDER_ID_OR_URL>`
- **Test Data**: Configured via environment variables (see `.env.example`)
    - `TEST_GDRIVE_FOLDER_URL`: Google Drive folder URL
    - `TEST_GDRIVE_FOLDER_ID`: Google Drive folder ID
    - `TEST_GDRIVE_FILE_COUNT`: Expected number of files in test folder (default: 3)
    - `TEST_GDRIVE_EMPTY_FOLDER_ID`: Empty test folder ID
    - Default values are provided as fallbacks if environment variables are not set
- **Authentication**: Uses Google Cloud Application Default Credentials (ADC). The environment must be authenticated (e.g., via `gcloud auth application-default login`) to run these tests.

#### 3. Test Scenarios

##### Scenario 1: Process Folder via URL (Happy Path)
- **Description**: Verify that providing a valid Google Drive folder URL correctly triggers the download of all supported files.
- **Input**: `slipstream process --folder https://drive.google.com/drive/folders/YOUR_FOLDER_ID?usp=drive_link`
- **Expected Output**:
    - CLI output indicates the folder ID being processed.
    - CLI output shows successful download messages for each of the 3 files.
    - Exit code: 0.
- **Success Criteria**: All 3 files are reported as downloaded.

##### Scenario 2: Process Folder via Folder ID
- **Description**: Verify that providing a raw Google Drive folder ID works identically to the URL.
- **Input**: `slipstream process --folder 1cg0AW0TXne_xXu__psn7lvcG1vwcbV6W`
- **Expected Output**:
    - CLI output shows successful download messages for each of the 3 files.
    - Exit code: 0.
- **Success Criteria**: All 3 files are reported as downloaded.

##### Scenario 3: Process Invalid Folder ID
- **Description**: Verify the system's behavior when a non-existent or inaccessible folder ID is provided.
- **Input**: `slipstream process --folder non_existent_id_12345`
- **Expected Output**:
    - CLI output shows an error message related to Google Drive communication (e.g., 404 Not Found).
    - Exit code: 1.
- **Success Criteria**: CLI reports the error and exits with a non-zero code.

##### Scenario 4: Process Empty Folder (or folder with no supported files)
- **Description**: Verify behavior when no files match the required MIME types.
- **Input**: A valid folder ID for an empty folder.
- **Expected Output**:
    - CLI output: "No supported files found in folder."
    - Exit code: 0.
- **Success Criteria**: CLI gracefully handles the absence of files.

#### 4. Implementation Details
- **Framework**: `pytest`
- **Marker**: `@pytest.mark.integration`
- **Execution**: `pytest -m integration`
- **File Location**: `tests/test_integration_gdrive.py`

#### 5. Success/Failure Criteria
- **Pass**: All scenarios produce the expected CLI output and exit codes. Files are "downloaded" (mocked or verified via temporary directory if possible, though integration tests here focus on the CLI flow against the real API).
- **Fail**:
    - Unexpected exit codes.
    - Missing download confirmation for any of the 3 files in the test folder.
    - Improper error messages for invalid inputs.

#### 6. Edge Cases & Error Conditions
- **Network Interruptions**: How the tool handles transient network failures during listing or downloading.
- **Permission Denied**: Behavior when the ADC does not have access to the specified folder.
- **Mixed File Types**: Ensuring only supported types are downloaded if the folder contains others.

#### 7. Implementation Checklist
- [x] Create `tests/test_integration_gdrive.py`
- [x] Implement `pytest` fixture for integration test environment
- [x] Implement Scenario 1: Process Folder via URL
- [x] Implement Scenario 2: Process Folder via Folder ID
- [x] Implement Scenario 3: Process Invalid Folder ID
- [x] Implement Scenario 4: Process Empty Folder
- [x] Verify all tests pass with `pytest -m integration`
- [x] Document any authentication setup required for local execution
- [x] Move test folder IDs to environment variables
- [x] Create `.env.example` file for newcomers
